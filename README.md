# 概要

長野県にある小さな洋菓子店「ながのCAKE」の商品を通販するためのECサイトです。

# アプリケーションの詳細な説明・実装機能

「ながのCAKE」の通販サイトで、注文に応じて製作する受注生産型。
顧客が操作する会員側機能と、店側が操作する管理側機能がある。

### 1.会員側機能

- 顧客は会員登録、ログイン・ログアウト、退会ができます。
- 会員のログインはメールアドレスとパスワードで⾏えます。
- 会員がログインしている状態だと、ページのヘッダーにユーザ名が表示されます。
- 商品一覧と商品詳細画面の閲覧はログインなしで⾏えます。
- 商品をカートに⼊れ、1度に複数種類、複数商品の購⼊ができます。また、カート内の商品は個数変更・削除ができます。
- カートへの商品追加にはログインが必要です。
- クレジットカード情報はシステム上保持されません。
- 会員はマイページからユーザ情報の閲覧・編集、注⽂履歴の閲覧、配送先の閲覧・ 編集ができます。
- 注⽂履歴⼀覧には下記の情報が表⽰されます。
  - 注⽂⽇
  - 配送先
  - ⽀払⾦額(商品合計＋送料)
  - 注⽂ステータス
- 注⽂履歴詳細には下記の情報が表⽰されます。
  - 注⽂⽇
  - 配送先
  - ⽀払⽅法
  - 注⽂ステータス
  - 商品の注⽂内容詳細（商品名、単価、個数、⼩計）
  - 請求情報（商品合計、送料、⽀払⾦額）
    会員登録時、下記の情報をユーザ情報として⼊⼒します。
  - 名前（姓・名）
  - 名前（カナ姓・カナ名）
  - 郵便番号
  - 住所
  - 電話番号
  - メールアドレス
  - パスワード
- 商品は税込価格で表⽰されます。（消費税 10％）

### 2.管理者側機能

- 管理者⽤メールアドレスとパスワードでログインできます。（管理者用メールアドレスとパスワードは事前にSeed等でデータベースへ登録が必要です。）
- 商品の新規追加、編集、販売停⽌（売切表⽰）が⾏えます。
- 商品情報は下記のものを保持しています。
  - 商品名
  - 商品説明⽂
  - ジャンル
  - 税抜価格
  - 商品画像
  - 販売ステータス
- 会員登録されているユーザ情報の閲覧、編集、退会処理が⾏えます。
- ユーザの注⽂履歴が⼀覧・詳細表⽰できます。
- 注⽂履歴一覧には注⽂ごとに下記の情報が表⽰されます。
　　 - 購⼊日時
  - 購⼊者
  - 注文個数
  - 注⽂ステータス
- 注文履歴詳細には注⽂ごとに下記の情報が表⽰されます。
  - 購入者
  - 注文日
  - 配送先
  - 支払方法
  - 料金（商品合計、送料、請求金額合計）
  - 注文ステータス
  - 各注文商品詳細（商品名、単価(税込)、数量、小計）
  - 各注文商品の製作ステータス
  - 料金（商品合計、送料、請求金額合計）
  - 配送先
  - 注⽂ステータス
  - 各注⽂商品の製作ステータス
- 注⽂ステータス、製作ステータスの更新ができます。

### 3.用語の定義

| 用語           | 意味                                                                                                      |
| -------------- | --------------------------------------------------------------------------------------------------------- |
| 顧客           | ながのCAKEの商品を購入する人（客）                                                                      |
| 会員           | ECサイトにユーザ登録している顧客                                                                     |
| EC サイト      | 顧客が利用するサイト                                                                                      |
| 管理サイト     | 店で働く事務員・パティシエ等が利用するサイト（管理者用サイト）                                            |
| 注文ステータス | 注文の状態遷移を表す（後述）                                                                              |
| 製作ステータス | 注文に紐付く注文商品の状態遷移を表す（後述）                                                              |
| 販売ステータス | 商品の販売状況を表す。現状、販売中・売り切れの2パターンがある。販売停止商品は「売切れ」をセットする。 |
| 会員ステータス | 現状、有効・退会の2パターンがある。                                                                     |
| ジャンル       | 商品の種類。現状、ケーキ・プリン・焼き菓子・キャンディの4ジャンルある。                                 |
| 注文個数       |　　1回の注文に紐付く注文個数の合計。例）商品Aを3個、商品Bを2個注文→注文個数は5個。              |
| 商品小計       | 商品単価（税込）×個数。例）1,200円（税込）の商品を2個購入＝商品小計は2,400円                      |

### 4.各種ステータス

<table>
  <tr>
    <th>ステータス名</th>
    <th>用途</th>
    <th>ステータス</th>
    <th>設定タイミング</th>
  </tr>
  <tr>
    <td rowspan=5>注文ステータス</td>
    <td rowspan=5>注文状況を表す。会員の購入履歴にも表示する。</td>
    <td>入金待ち</td>
    <td>注文した時点でデフォルトで設定される</td>
  </tr>
  <tr>
    <td>入金確認</td>
    <td>管理者側が入金を確認したら更新する</td>
  </tr>
  <tr>
    <td>製作中</td>
    <td>紐付く注文商品の製作ステータスが1つでも「製作中」になったらになったら自動更新</td>
  </tr>
  <tr>
    <td>発送準備中</td>
    <td>紐付く注文商品の製作ステータスが全て「製作完了」になったら自動更新</td>
  </tr>
  <tr>
    <td>発送済み</td>
    <td>管理者側が発送完了時に設定する</td>
  </tr>
  <tr>
    <td rowspan=4>製作ステータス</td>
    <td rowspan=4>各商品の製作状況を表す。管理者側でのみ使用する。</td>
    <td>着手不可</td>
    <td>注文した時点でデフォルトで設定される</td>
  </tr>
  <tr>
    <td>製作待ち</td>
    <td>紐付く注文ステータスが「入金確認」になったら自動更新</td>
  </tr>
  <tr>
    <td>製作中</td>
    <td>製作着手するタイミングで管理者側が設定する</td>
  </tr>
  <tr>
    <td>製作完了</td>
    <td>製作が完了したタイミングで管理者側が設定する</td>
  </tr>
</table>


# 開発環境

cloud9


### 使用言語

- HTML&CSS
- Ruby
- Ruby 2.6.3
- SQlite3 3.33.0
- HTML5

### フレームワーク

- Ruby on rails (5.2.4.4)

### Gem

- device
- refile
- refile-mini-magick
- dotenv-rails
- bootstrap-sass
- jquery-rails
- kaminari

# 使用方法

### 顧客側

1. はじめに会員登録をお願いいたします。登録なしに商品を閲覧することは可能ですが、注文する際は必須になります。
2. お好きな商品が見つかりましたらカートに入れていただき、注文情報入力へお進みください。
3. 支払方法、配送先等を選択いただき、注文確定を押すと注文が完了いたします。

### 管理者側

1. まず管理者登録をお願いいたします。登録が完了しますと、管理者機能が使用可能になります。
2. ジャンルと商品情報を登録していただきますと、顧客サイトで閲覧が可能になります。
3. 顧客から注文があると注文一覧に表示され詳細が確認できます。入金が確認できたら注文ステータスを変更し、製作が終了しましたら製作ステータスを変更してください。（それぞれ連動して変更が反映されます）
4. 顧客一覧から顧客詳細の確認・変更・退会が可能です。

# 作成者

MarinaTsunoda
